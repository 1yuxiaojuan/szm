!function(){var t=[];Object.create||(Object.create=function(t,n){function e(){}if("undefined"!=typeof n)throw"The multiple-argument version of Object.create is not provided by this browser and cannot be shimmed.";return e.prototype=t,new e});var n,e=function(){return{}},i=function(t,n){var i,o=window;if(t){var r=t.split(".");i=r.pop(),$.each(r,function(t,n){var i=o[n];return i?void(o=i):void(o=o[n]=new e)})}return i&&(o[i]=n),n},o=function(t,n){var e=n||window,i=e;if(t){var o=t.split(".");$.each(o,function(t,n){return i=e=e[n],i?void 0:!1})}return i},r=function(t,n){var e,i,o,r=t.lastIndexOf("."),a=this.__model;h.get(t,a);r>0?(e=t.substring(0,r),o=t.substring(1),i=h.get(e,this.__model),i[o]=n):this.__model[t]=n},a=function(e,r){var a=e.name,s=(e.view,e.parent);if(s&&"string"==typeof s){var c=s;if(s=o(s),!s)throw"Parent not found!["+c+"]"}r||$.each(t,function(t,n){s=n.fn.call(n.scope,e,s)});var u=f(s||n,e);return a?i(a,u):u},f=function(t,n){var e=t.prototype,i=Object.create(e),o=function(){var t=this.init;t&&t.apply(this,arguments)};return $.each(n,function(t,n){"method"==t?s(i,n):i[t]=n}),o.prototype=i,o},s=function(t,n){var e=n||{};$.each(e,function(n,e){var i=t[n];void 0!=i&&"function"==typeof i?"init"===n?t[n]=function(t,n){return function(){return t.apply(this,arguments),n.apply(this,arguments)}}(i,e):t[n]=function(t,n){return function(){return this.parent=t,n.apply(this,arguments)}}(i,e):t[n]=e})},c=function(){};n=f(c,{init:function(){},on:function(t){var n,e=this.__eventMap,i=t.name,o=t.scope,r=t.fn;e||(e=this.__eventMap={}),n=e[i],n||(n=e[i]=[]),n.push({scope:o,fn:r})},fire:function(t,n){var e=this.__eventMap,i=(e?e[t]:[])||[];$.each(i,function(t,e){var i=e.scope,o=e.fn;o.call(i,n)})},callHandler:function(t,n){var e=this.getHandler(t);if(!e)throw new Error("Handler nout found.["+t+"]");e.call(this,n)},getHandler:function(t){return this[t+"Handler"]},setOpts:function(t){return t instanceof h.Model?this.setModel(t):this.setJSONData(t)},setJSONData:function(t){var n=this._model;return n||this.initDefaultModel(),n.setOpts(t),n},initDefaultModel:function(){var t=h.getType(this.model);if(!t)throw new Error("Can not get model type for ["+this.name+"]");this.setModel(new t)},resetModel:function(t){t.reset()},setModel:function(t){return this._model&&this.resetModel(t),this._model=t,this.onModelReady(t),t},onModelReady:function(t){},getModel:function(){return this._model}});var u=function(n){t.push(n)},h=window.nb={};h.name=i,h.define=a,h.extend=f,h.addDefineInterceptor=u,h.get=o,h.set=r,h.getType=function(t){var n=t;if("string"==typeof t){var e=t;if(n=h.get(e),null==n)throw"Type not found["+e+"]"}return n}}(),function(){nb.define({name:"nb.Model",method:{init:function(){this.__model={},this.__eventMap={}},setOpts:function(t){var n=t||{},e=this;$.each(n,function(t,n){void 0!=n&&e.set(t,n)})},get:function(t){var n=nb.get(t,this.__model);return n},set:function(t,n,e){var i,o,r,a=t.lastIndexOf("."),f=this.__model,s=nb.get(t,f);a>0?(i=t.substring(0,a),r=t.substring(1),o=nb.get(i,this.__model),o[r]=n):this.__model[t]=n,this._fireChangeEvent(t,n,e,s)},onChange:function(t){var n,e=this.__eventMap,i=t.name,o=t.type||"after",r=t.once,a=t.scope,f=t.fn,s=e[i];s||(s={},e[i]=s),n=s[o],n||(n=[],s[o]=n),n.push({scope:a,fn:f,once:r})},reset:function(){this.__eventMap={}},switchChange:function(t){var n=(t.name,t.off),e=(this.__eventMap,(events?events.before:[])||[]);this._turnOffEventArray(e,n),e=(events?events.after:[])||[],this._turnOffEventArray(e,n)},_fireChangeEvent:function(t,n,e,i){var o=this.__model,r=this.__eventMap,a=r[t],f=(a?a.before:[])||[],s={name:t,origin:i,data:n},c=e?e.skipSameValue:!0,u=e?e.noBefore:!1;c&&n==i||(1!=u&&this._executeEventArray(f,s),o[t]=n,f=(a?a.after:[])||[],this._executeEventArray(f,s))},_turnOffEventArray:function(t,n){$.each(t,function(t,e){e.off=n})},_executeEventArray:function(t,n){$.each(t,function(e,i){if(i){var o=i.scope,r=i.fn,a=i.once,f=i.off;f||(r.call(o,n),a&&delete t[e])}})}}})}(),function(){var t={string:function(t){var n=t.$,e=n.prop("tagName").toLowerCase(),i=t.content;"input"==e?n.val(i):n.html(i)},object:function(t){var n=t.content,e=t.root,i=o(n,e),r=n.$name,a=i.$();if(t.$.append(a),r){var f="$"+r,s=e[f];if(s){if("array"!=$.type(s)){var c=[s];s=e[f]=c}s.push(i)}else e[f]=i}},array:function(t){$.each(t.content,function(e,i){n({$:t.$,container:t.container,root:t.root,content:i})})},undefined:function(){}},n=function(n){var e=n.content,i=$.type(e);t[i](n)},e={"class":function(t,n,e,i){var o=e["class"];o&&n.addClass(o)},style:function(t,n,e,i){var o=e.style;o&&n.css(o)},content:function(t,e,i,o){n({$:e,container:t,root:o||t,content:i.content})}},i=function(t,n){var e;if(void 0!=t){if(e=this["$"+t],!e)throw new Error("Child not found.Please check the $name property.["+t+"]")}else e=this;return n||(e=e.$root||e.__viewInstance.$root),e},o=function(t,n){var e;return e=t.$type?a(t,n):t.$template?r(t,n):f(t,n)},r=function(t,n){},a=function(t,n){var e,i,o,r=t.$type,a=t.$opts,f=t.$model,s=t["class"],c=t.style;r=nb.getType(r);var u=new r;return a&&u.setOpts(a),s&&u.$().addClass(s),c&&u.$().css(c),f&&(e=f.split(":"),i=u.getModel(),o=nb.get(e[0]),o.set(e[1],i)),u},f=function(t,n){var e={$:i};if($.isArray(t)){var r=$("<div>");$.each(t,function(t,n){var i=n.$name,a=o(n,e);i&&(e["$"+i]=a),r.append(a.$())}),e.$root=r.children()}else e.$root=s(e,t,n);return e},s=function(t,n,i){var o=n.tag||"div",r=$("<"+o+">");return $.each(n,function(o,a){var f=o.toLowerCase();if("tag"==f)return!0;var s=e[o];s?s(t,r,n,i):0===f.indexOf("$")?r.attr("data-nb-"+f.substring(1),a):r.attr(f,a)}),r},c=function(){var t,n=this.view;n&&(t=this.__viewInstance=o(n)),this.model&&this.initDefaultModel()},u=function(t,n){return this.__viewInstance.$(t,n)};nb.addDefineInterceptor({scope:this,fn:function(t,n){return t&&t.view?n&&n.prototype.view?nb.define({parent:n,method:{$:u}},!0):nb.define({parent:n,method:{init:c,$:u}},!0):n}})}();